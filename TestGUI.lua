local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")

local function createButton(name, position, text, scriptUrl)
    local button = Instance.new("TextButton")
    button.Name = name
    button.Parent = Window
    button.Position = position
    button.Text = text
    button.TextScaled = false
    button.TextSize = 17.5
    button.MouseButton1Click:Connect(function()
        loadstring(game:HttpGet(scriptUrl))()
    end)
    return button
end

local function styleButton(button, isVisible)
    local delay = isVisible and 0 or 0.5 -- Adjust the delay as needed
    button:WaitForChild("Tween") -- Create Tween instance once
    local tweenInfo = TweenInfo.new(delay, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local goal = {
        BackgroundColor3 = isVisible and Color3.fromRGB(75, 75, 75) or Color3.fromRGB(0, 0, 0),
        Size = isVisible and UDim2.new(0, 187.5, 0, 62.5) or UDim2.new(0, 0, 0, 0),
        BorderColor3 = isVisible and Color3.fromRGB(100, 100, 100) or Color3.fromRGB(0, 0, 0),
        TextTransparency = isVisible and 0 or 1
    }

    local tween = TweenService:Create(button, tweenInfo, goal)
    tween:Play()
end

local function createAndStyleButton(name, position, text, scriptUrl)
    local button = createButton(name, position, text, scriptUrl)
    styleButton(button, true)
    return button
end

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = CoreGui
ScreenGui.Name = "common script v1"

local Window = Instance.new("Frame")
Window.Name = "Window"
Window.Parent = ScreenGui
Window.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
Window.Position = UDim2.new(0.5, -125, 0.5, -125)
Window.Size = UDim2.new(0, 250, 0, 312.5)
Window.BorderSizePixel = 2
Window.BorderColor3 = Color3.fromRGB(60, 60, 60)
Window.Active = true
Window.Draggable = true

local MinimizeButton = createAndStyleButton("MinimizeButton", UDim2.new(1, -50, 1, -25), "_", "")
local ExpandButton = createAndStyleButton("ExpandButton", UDim2.new(1, -25, 1, -25), "^", "")

local isMinimized = false

local function animateWindow(size)
    local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local goal = { Size = size }
    local tween = TweenService:Create(Window, tweenInfo, goal)
    tween:Play()

    for _, button in ipairs(Window:GetChildren()) do
        if button:IsA("TextButton") then
            styleButton(button, size.Y.Offset > 25)
        end
    end
end

MinimizeButton.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized
    local newSize = isMinimized and UDim2.new(0, 250, 0, 25) or UDim2.new(0, 250, 0, 312.5)
    animateWindow(newSize)
end)

ExpandButton.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized
    local newSize = isMinimized and UDim2.new(0, 250, 0, 25) or UDim2.new(0, 250, 0, 312.5)
    animateWindow(newSize)
end)

-- Create and style buttons
local button1 = createAndStyleButton("Button1", UDim2.new(0.5, -93.75, 0, 37.5), "Expander", 'https://raw.githubusercontent.com/Vcsk/RobloxScripts/main/HitboxExpander.lua')
local button2 = createAndStyleButton("Button2", UDim2.new(0.5, -93.75, 0, 112.5), "Aimbot", 'https://raw.githubusercontent.com/PABLOSleuth2/Scripts1/main/RobloxScripts/TEST/aimbot_v2.lua')
local button3 = createAndStyleButton("Button3", UDim2.new(0.5, -93.75, 0, 187.5), "Fly", 'https://raw.githubusercontent.com/Niviana1/Personal-exploit-/main/Mobilefly.lua')
