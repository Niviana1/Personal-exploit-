local GUI = {}

function GUI.newFrame(title, x, y, width, height)
    local frame = Instance.new("Frame")
    frame.Name = title
    frame.Position = UDim2.new(0, x, 0, y)
    frame.Size = UDim2.new(0, width, 0, height)
    frame.BackgroundColor3 = Color3.new(0, 0, 0)
    frame.BorderSizePixel = 2

    local titleBar = Instance.new("Frame")
    titleBar.Name = "TitleBar"
    titleBar.Size = UDim2.new(1, 0, 0, 30)
    titleBar.BackgroundColor3 = Color3.new(0, 0, 0)
    titleBar.BorderSizePixel = 0
    titleBar.Parent = frame

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Name = "TitleLabel"
    titleLabel.Size = UDim2.new(1, 0, 1, 0)
    titleLabel.Text = title
    titleLabel.TextColor3 = Color3.new(1, 1, 1)
    titleLabel.TextSize = 18
    titleLabel.Parent = titleBar

    return frame
end

function GUI.addButton(parent, text, onClick)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0, 100, 0, 30)
    button.Text = text
    button.TextColor3 = Color3.new(1, 1, 1)
    button.BackgroundColor3 = Color3.new(0, 0, 0)
    button.BorderSizePixel = 2
    button.MouseButton1Click:Connect(onClick)
    button.Parent = parent

    return button
end

function GUI.addToggle(parent, text, onToggled)
    local toggleButton = Instance.new("TextButton")
    toggleButton.Size = UDim2.new(0, 100, 0, 30)
    toggleButton.Text = text
    toggleButton.TextColor3 = Color3.new(1, 1, 1)
    toggleButton.BackgroundColor3 = Color3.new(0, 0, 0)
    toggleButton.BorderSizePixel = 2
    toggleButton.MouseButton1Click:Connect(onToggled)
    toggleButton.Parent = parent

    return toggleButton
end

function GUI.addTabSystem(parent, tabs)
    local tabContainer = Instance.new("Frame")
    tabContainer.Name = "TabContainer"
    tabContainer.Size = UDim2.new(1, 0, 1, -30)
    tabContainer.Position = UDim2.new(0, 0, 0, 30)
    tabContainer.Parent = parent

    local activeTab = nil

    for _, tabInfo in ipairs(tabs) do
        local tabButton = Instance.new("TextButton")
        tabButton.Size = UDim2.new(0, 100, 0, 30)
        tabButton.Text = tabInfo.title
        tabButton.TextColor3 = Color3.new(1, 1, 1)
        tabButton.BackgroundColor3 = Color3.new(0, 0, 0)
        tabButton.BorderSizePixel = 2
        tabButton.MouseButton1Click:Connect(function()
            if activeTab then
                activeTab.Visible = false
            end
            activeTab = tabInfo.content
            activeTab.Visible = true
        end)
        tabButton.Parent = titleBar
    end

    return tabContainer
end

function GUI.makeWindowDraggable(window)
    local dragging = false
    local touchStartPosition = Vector2.new(0, 0)
    local windowStartPosition = window.Position

    window.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            touchStartPosition = input.Position
        end
    end)

    window.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.Touch then
            local delta = input.Position - touchStartPosition
            window.Position = UDim2.new(
                0, windowStartPosition.X + delta.X,
                0, windowStartPosition.Y + delta.Y
            )
        end
    end)

    window.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch then
            dragging = false
            windowStartPosition = window.Position
        end
    end)
end

return GUI
