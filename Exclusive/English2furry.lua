local translations = {
    ["ahh"] = "murr",
    ["awesome"] = "pawsome",
    ["awful"] = "pawful",
    ["bite"] = "nom",
    ["bulge"] = "bulgy-wulgy",
    ["butthole"] = "tailhole",
    ["bye"] = "bai",
    ["celebrity"] = "popufur",
    ["cheese"] = "sergal",
    ["child"] = "cub",
    ["computer"] = "protogen",
    ["robot"] = "protogen",
    ["cyborg"] = "protogen",
    ["cum"] = "cummy wummy~",
    ["disease"] = "pathOwOgen",
    ["dog"] = "good boy",
    ["dragon"] = "derg",
    ["eat"] = "vore",
    ["f***"] = "fluff",
    ["father"] = "daddy",
    ["foot"] = "footpaw",
    ["for"] = "fur",
    ["hand"] = "paw",
    ["hell"] = "hecc",
    ["hi"] = "hai",
    ["hyena"] = "yeen",
    ["kiss"] = "lick",
    ["lmao"] = "hehe~",
    ["love"] = "wuv",
    ["mouth"] = "maw",
    ["naughty"] = "knotty",
    ["not"] = "knot",
    ["perfect"] = "purrfect",
    ["persona"] = "fursona",
    ["pervert"] = "furvert",
    ["police"] = "pawlice",
    ["police department"] = "PAW Patrol",
    ["porn"] = "yiff",
    ["roar"] = "rawr",
    ["shout"] = "awoo",
    ["slut"] = "fox",
    ["source"] = "sauce",
    ["straight"] = "gay",
    ["tale"] = "tail",
    ["the"] = "teh",
    ["this"] = "dis",
    ["toe"] = "toe bean",
    ["what"] = "wat",
    ["with"] = "wif",
    ["you"] = "chu",
    ["your"] = "ur",
    ["forgive me father, I have sinned"] = "sowwy daddy~ i've been naughty",
    ["have sex with"] = "yiff",
    ["old person"] = "greymuzzle",
    ["what's this"] = "OwO what's this",
    ["you are"] = "chu is",
    [","] = "~",
    [";"] = "~",
    ["!"] = "owo!",
    ["?"] = "uwu?",
    [":)"] = ":3",
    [":O"] = "OwO",
    ["( 포 춿폪퉀 포 춿)"] = "OwO",
    [":D"] = "UwU",
    ["XD"] = "X3"
}

local function translateMessage(message)
    -- Translate words
    for word, translation in pairs(translations) do
        message = string.gsub(message, "%f[%a]"..word.."%f[%A]", translation)
        message = string.gsub(message, "%f[%a]"..word:gsub("[rl]", {["r"] = "w", ["l"] = "w"}).."%f[%A]", translation:gsub("[RL]", {["R"] = "W", ["L"] = "W"}))
    end

    -- Translate emoticons
    message = string.gsub(message, ":)", ":3")
    message = string.gsub(message, ":O", "OwO")
    message = string.gsub(message, "\( 포 춿폪퉀 포 춿\)", "OwO")
    message = string.gsub(message, ":D", "UwU")
    message = string.gsub(message, "XD", "X3")
    message = string.gsub(message, "游", "游떀")

    -- Add semi-randomly placed owos and uwus
    message = string.gsub(message, "%s+", function(space)
        return space .. (math.random(1, 10) > 5 and " owo" or " uwu")
    end)

    return message
end

local mt = getrawmetatable(game)
local oldNamecall = mt.__namecall

setreadonly(mt, false)

mt.__namecall = newcclosure(function(self, ...)
    local args = {...}
    if getnamecallmethod() == "InvokeServer" and tostring(self) == "SayMessageRequest" and args[1] then
        args[1] = translateMessage(args[1])
    end
    return oldNamecall(self, unpack(args))
end)

setreadonly(mt, true)
