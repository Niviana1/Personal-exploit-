-- Translation function
local function translateText(text)
    local translator = {
        translations = {
            ["ahh"] = "murr",
            ["awesome"] = "pawsome",
            ["awful"] = "pawful",
            ["bite"] = "nom",
            ["bulge"] = "bulgy-wulgy",
            ["butthole"] = "tailhole",
            ["bye"] = "bai",
            ["celebrity"] = "popufur",
            ["cheese"] = "sergal",
            ["child"] = "cub",
            ["computer"] = "protogen",
            ["robot"] = "protogen",
            ["cyborg"] = "protogen",
            ["disease"] = "pathOwOgen",
            ["dog"] = "good boy",
            ["dragon"] = "derg",
            ["eat"] = "vore",
            ["fuck"] = "fluff",
            ["father"] = "daddy",
            ["foot"] = "footpaw",
            ["for"] = "fur",
            ["hand"] = "paw",
            ["hell"] = "hecc",
            ["hi"] = "hai",
            ["hyena"] = "yeen",
            ["kiss"] = "lick",
            ["lmao"] = "hehe~",
            ["love"] = "wuv",
            ["mouth"] = "maw",
            ["naughty"] = "knotty",
            ["not"] = "knot",
            ["perfect"] = "purrfect",
            ["persona"] = "fursona",
            ["pervert"] = "furvert",
            ["police"] = "pawlice",
            ["porn"] = "yiff",
            ["roar"] = "rawr",
            ["shout"] = "awoo",
            ["source"] = "sauce",
            ["tale"] = "tail",
            ["the"] = "teh",
            ["this"] = "dis",
            ["toe"] = "toe bean",
            ["what"] = "wat",
            ["with"] = "wif",
            ["you"] = "chu",
            ["your"] = "ur",
            ["what's"] = "OwO what's",
            ["are"] = "is",
            ["r"] = "w",
            ["l"] = "w",
            ["R"] = "W",
            ["L"] = "W",
            [","] = "~",
            [";"] = "~",
            ["!"] = "owo!",
            ["?"] = "uwu?",
            [":)"] = ":3",
            [":O"] = "OwO",
            ["( ͡ °͜ʖ ͡ °)"] = "OwO",
            [":D"] = "UwU",
            ["XD"] = "X3"
        }
    }
    
    local output = ""
    local lastSpace = false
    
    for word in text:gmatch("%S+") do
        -- Add "uwu" if there are 2 consecutive spaces
        if lastSpace and word == "" then
            output = output .. "uwu "
        end

        local translatedWord = translator.translations[word:lower()]
        if translatedWord then
            output = output .. translatedWord .. " "
        else
            -- Translate all occurrences of 'r' and 'l', including lowercase
            local translatedWord = word:gsub("[rR]", "w"):gsub("[lL]", "w")
            output = output .. translatedWord .. " "
        end

        -- Check for consecutive spaces
        lastSpace = word == ""
    end
    
    return output
end
